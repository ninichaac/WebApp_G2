//==== fetch ====
fetch('/now')
    .then(function (response) {
        if (response.ok) {
            // convert res obj to txt
            return response.text();
        }
        throw Error('Connection error');
    })
    .then(function (data) {
        document.querySelector('h1').innerText = data;
    })
    .catch(function (err) {
        console.log(err);
        alert(err);
    })

    // ====== try catch ===
    document.querySelector('button').onclick = async () => {
        try {
            const response = await fetch('/now');
            if (response.ok) {
                const data = await response.text();
                document.querySelector('h1').innerText = data;
            } else {
                throw Error('Connection error');
            }
        } catch (err) {
            console.log(err);
            alert(err);
        }
    }

    // ==== get data form ===
    const formlogin = document.querySelector('#formlogin');
        formlogin.onsubmit = async function (e) {
            e.preventDefault();
            const username = formlogin.elements['txtuser'].value;
            const password = formlogin.elements['txtpass'].value;
            console.log(username, password);
            try {
                const options = {
                    method: 'POST',
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({
                        "username": username, "password": password
                    })
                };
                const response = await fetch(`/login`, options);
                if (response.ok) {
                    const data = await response.text();
                    alert(data);
                } else {
                    const data = await response.text();
                    throw Error(data);
                }
            } catch (err) {
                console.error(err);
                alert(err.message);
            }
        }
